{"ast":null,"code":"var _jsxFileName = \"D:\\\\codes\\\\PocketFlow-Tutorial-Codebase-Knowledge\\\\paul\\\\mj\\\\frontend\\\\src\\\\components\\\\KongActionHistory.tsx\";\nimport React from 'react';\nimport { motion } from 'framer-motion';\nimport { MeldType, GangType, tileToString } from '../types/mahjong';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KongActionHistory = ({\n  melds,\n  currentPlayer,\n  className = ''\n}) => {\n  // 获取杠牌操作列表 - 过滤掉直杠（明杠），因为直杠信息已经直接显示在杠牌上\n  const kongMelds = melds.filter(meld => meld.type === MeldType.GANG && meld.gang_type !== GangType.MING_GANG // 排除直杠（明杠）\n  );\n\n  // 获取杠牌类型的中文名称\n  const getKongTypeName = gangType => {\n    switch (gangType) {\n      case GangType.MING_GANG:\n        return '明杠';\n      case GangType.AN_GANG:\n        return '暗杠';\n      case GangType.JIA_GANG:\n        return '加杠';\n      default:\n        return '杠';\n    }\n  };\n\n  // 获取玩家名称\n  const getPlayerName = playerId => {\n    const playerNames = ['我', '下家', '对家', '上家'];\n    return playerNames[playerId] || `玩家${playerId + 1}`;\n  };\n\n  // 获取操作描述\n  const getActionDescription = meld => {\n    if (!meld.tiles.length) return '';\n    const tileName = tileToString(meld.tiles[0]);\n    const kongType = getKongTypeName(meld.gang_type);\n    if (meld.gang_type === GangType.MING_GANG && meld.source_player !== undefined) {\n      const sourceName = getPlayerName(meld.source_player);\n      return `${kongType}了${sourceName}的${tileName}`;\n    } else if (meld.gang_type === GangType.JIA_GANG) {\n      return `${kongType} ${tileName}`;\n    } else {\n      return `${kongType} ${tileName}`;\n    }\n  };\n\n  // 获取时间显示\n  const getTimeDisplay = timestamp => {\n    if (!timestamp) return '';\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString('zh-CN', {\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    });\n  };\n  if (kongMelds.length === 0) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(motion.div, {\n    className: `kong-action-history bg-white rounded-lg shadow-md p-3 ${className}`,\n    initial: {\n      opacity: 0,\n      y: 10\n    },\n    animate: {\n      opacity: 1,\n      y: 0\n    },\n    transition: {\n      duration: 0.3\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"text-sm font-semibold text-gray-700 mb-2 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"w-2 h-2 bg-orange-500 rounded-full mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), \"\\u6760\\u724C\\u8BB0\\u5F55\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-2\",\n      children: kongMelds.map((meld, index) => /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"flex items-center justify-between text-xs bg-gray-50 rounded p-2\",\n        initial: {\n          opacity: 0,\n          x: -20\n        },\n        animate: {\n          opacity: 1,\n          x: 0\n        },\n        transition: {\n          delay: index * 0.1\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold ${meld.gang_type === GangType.MING_GANG ? 'bg-red-500' : meld.gang_type === GangType.AN_GANG ? 'bg-gray-500' : 'bg-yellow-500'}`,\n            children: meld.gang_type === GangType.MING_GANG ? '明' : meld.gang_type === GangType.AN_GANG ? '暗' : '加'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-700 font-medium\",\n            children: getActionDescription(meld)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), meld.timestamp && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-gray-400\",\n          children: getTimeDisplay(meld.timestamp)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 15\n        }, this)]\n      }, meld.id || index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_c = KongActionHistory;\nexport default KongActionHistory;\nvar _c;\n$RefreshReg$(_c, \"KongActionHistory\");","map":{"version":3,"names":["React","motion","MeldType","GangType","tileToString","jsxDEV","_jsxDEV","KongActionHistory","melds","currentPlayer","className","kongMelds","filter","meld","type","GANG","gang_type","MING_GANG","getKongTypeName","gangType","AN_GANG","JIA_GANG","getPlayerName","playerId","playerNames","getActionDescription","tiles","length","tileName","kongType","source_player","undefined","sourceName","getTimeDisplay","timestamp","date","Date","toLocaleTimeString","hour","minute","second","div","initial","opacity","y","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","map","index","x","delay","id","_c","$RefreshReg$"],"sources":["D:/codes/PocketFlow-Tutorial-Codebase-Knowledge/paul/mj/frontend/src/components/KongActionHistory.tsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Meld, MeldType, GangType, tileToString } from '../types/mahjong';\r\n\r\ninterface KongActionHistoryProps {\r\n  melds: Meld[];\r\n  currentPlayer: number;\r\n  className?: string;\r\n}\r\n\r\nconst KongActionHistory: React.FC<KongActionHistoryProps> = ({\r\n  melds,\r\n  currentPlayer,\r\n  className = ''\r\n}) => {\r\n  // 获取杠牌操作列表 - 过滤掉直杠（明杠），因为直杠信息已经直接显示在杠牌上\r\n  const kongMelds = melds.filter(meld => \r\n    meld.type === MeldType.GANG && \r\n    meld.gang_type !== GangType.MING_GANG  // 排除直杠（明杠）\r\n  );\r\n\r\n  // 获取杠牌类型的中文名称\r\n  const getKongTypeName = (gangType?: GangType): string => {\r\n    switch (gangType) {\r\n      case GangType.MING_GANG:\r\n        return '明杠';\r\n      case GangType.AN_GANG:\r\n        return '暗杠';\r\n      case GangType.JIA_GANG:\r\n        return '加杠';\r\n      default:\r\n        return '杠';\r\n    }\r\n  };\r\n\r\n  // 获取玩家名称\r\n  const getPlayerName = (playerId: number): string => {\r\n    const playerNames = ['我', '下家', '对家', '上家'];\r\n    return playerNames[playerId] || `玩家${playerId + 1}`;\r\n  };\r\n\r\n  // 获取操作描述\r\n  const getActionDescription = (meld: Meld): string => {\r\n    if (!meld.tiles.length) return '';\r\n    \r\n    const tileName = tileToString(meld.tiles[0]);\r\n    const kongType = getKongTypeName(meld.gang_type);\r\n    \r\n    if (meld.gang_type === GangType.MING_GANG && meld.source_player !== undefined) {\r\n      const sourceName = getPlayerName(meld.source_player);\r\n      return `${kongType}了${sourceName}的${tileName}`;\r\n    } else if (meld.gang_type === GangType.JIA_GANG) {\r\n      return `${kongType} ${tileName}`;\r\n    } else {\r\n      return `${kongType} ${tileName}`;\r\n    }\r\n  };\r\n\r\n  // 获取时间显示\r\n  const getTimeDisplay = (timestamp?: number): string => {\r\n    if (!timestamp) return '';\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString('zh-CN', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (kongMelds.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      className={`kong-action-history bg-white rounded-lg shadow-md p-3 ${className}`}\r\n      initial={{ opacity: 0, y: 10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <h4 className=\"text-sm font-semibold text-gray-700 mb-2 flex items-center\">\r\n        <span className=\"w-2 h-2 bg-orange-500 rounded-full mr-2\"></span>\r\n        杠牌记录\r\n      </h4>\r\n      \r\n      <div className=\"space-y-2\">\r\n        {kongMelds.map((meld, index) => (\r\n          <motion.div\r\n            key={meld.id || index}\r\n            className=\"flex items-center justify-between text-xs bg-gray-50 rounded p-2\"\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n          >\r\n            <div className=\"flex items-center space-x-2\">\r\n              {/* 杠牌类型图标 */}\r\n              <div className={`w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold ${\r\n                meld.gang_type === GangType.MING_GANG ? 'bg-red-500' :\r\n                meld.gang_type === GangType.AN_GANG ? 'bg-gray-500' :\r\n                'bg-yellow-500'\r\n              }`}>\r\n                {meld.gang_type === GangType.MING_GANG ? '明' :\r\n                 meld.gang_type === GangType.AN_GANG ? '暗' : '加'}\r\n              </div>\r\n              \r\n              {/* 操作描述 */}\r\n              <span className=\"text-gray-700 font-medium\">\r\n                {getActionDescription(meld)}\r\n              </span>\r\n            </div>\r\n            \r\n            {/* 时间戳 */}\r\n            {meld.timestamp && (\r\n              <span className=\"text-gray-400\">\r\n                {getTimeDisplay(meld.timestamp)}\r\n              </span>\r\n            )}\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default KongActionHistory; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}