{"ast":null,"code":"import React from'react';import{motion}from'framer-motion';import{MeldType,GangType,tileToString}from'../types/mahjong';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const KongActionHistory=_ref=>{let{melds,currentPlayer,className=''}=_ref;// 获取杠牌操作列表\nconst kongMelds=melds.filter(meld=>meld.type===MeldType.GANG);// 获取杠牌类型的中文名称\nconst getKongTypeName=gangType=>{switch(gangType){case GangType.MING_GANG:return'明杠';case GangType.AN_GANG:return'暗杠';case GangType.JIA_GANG:return'加杠';default:return'杠';}};// 获取玩家名称\nconst getPlayerName=playerId=>{const playerNames=['我','下家','对家','上家'];return playerNames[playerId]||\"\\u73A9\\u5BB6\".concat(playerId+1);};// 获取操作描述\nconst getActionDescription=meld=>{if(!meld.tiles.length)return'';const tileName=tileToString(meld.tiles[0]);const kongType=getKongTypeName(meld.gang_type);if(meld.gang_type===GangType.MING_GANG&&meld.source_player!==undefined){const sourceName=getPlayerName(meld.source_player);return\"\".concat(kongType,\"\\u4E86\").concat(sourceName,\"\\u7684\").concat(tileName);}else if(meld.gang_type===GangType.JIA_GANG){return\"\".concat(kongType,\" \").concat(tileName);}else{return\"\".concat(kongType,\" \").concat(tileName);}};// 获取时间显示\nconst getTimeDisplay=timestamp=>{if(!timestamp)return'';const date=new Date(timestamp);return date.toLocaleTimeString('zh-CN',{hour:'2-digit',minute:'2-digit',second:'2-digit'});};if(kongMelds.length===0){return null;}return/*#__PURE__*/_jsxs(motion.div,{className:\"kong-action-history bg-white rounded-lg shadow-md p-3 \".concat(className),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:0.3},children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-sm font-semibold text-gray-700 mb-2 flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-2 h-2 bg-orange-500 rounded-full mr-2\"}),\"\\u6760\\u724C\\u8BB0\\u5F55\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:kongMelds.map((meld,index)=>/*#__PURE__*/_jsxs(motion.div,{className:\"flex items-center justify-between text-xs bg-gray-50 rounded p-2\",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:index*0.1},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold \".concat(meld.gang_type===GangType.MING_GANG?'bg-red-500':meld.gang_type===GangType.AN_GANG?'bg-gray-500':'bg-yellow-500'),children:meld.gang_type===GangType.MING_GANG?'明':meld.gang_type===GangType.AN_GANG?'暗':'加'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700 font-medium\",children:getActionDescription(meld)})]}),meld.timestamp&&/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400\",children:getTimeDisplay(meld.timestamp)})]},meld.id||index))})]});};export default KongActionHistory;","map":{"version":3,"names":["React","motion","MeldType","GangType","tileToString","jsx","_jsx","jsxs","_jsxs","KongActionHistory","_ref","melds","currentPlayer","className","kongMelds","filter","meld","type","GANG","getKongTypeName","gangType","MING_GANG","AN_GANG","JIA_GANG","getPlayerName","playerId","playerNames","concat","getActionDescription","tiles","length","tileName","kongType","gang_type","source_player","undefined","sourceName","getTimeDisplay","timestamp","date","Date","toLocaleTimeString","hour","minute","second","div","initial","opacity","y","animate","transition","duration","children","map","index","x","delay","id"],"sources":["D:/codes/PocketFlow-Tutorial-Codebase-Knowledge/paul/mj/frontend/src/components/KongActionHistory.tsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Meld, MeldType, GangType, tileToString } from '../types/mahjong';\r\n\r\ninterface KongActionHistoryProps {\r\n  melds: Meld[];\r\n  currentPlayer: number;\r\n  className?: string;\r\n}\r\n\r\nconst KongActionHistory: React.FC<KongActionHistoryProps> = ({\r\n  melds,\r\n  currentPlayer,\r\n  className = ''\r\n}) => {\r\n  // 获取杠牌操作列表\r\n  const kongMelds = melds.filter(meld => meld.type === MeldType.GANG);\r\n\r\n  // 获取杠牌类型的中文名称\r\n  const getKongTypeName = (gangType?: GangType): string => {\r\n    switch (gangType) {\r\n      case GangType.MING_GANG:\r\n        return '明杠';\r\n      case GangType.AN_GANG:\r\n        return '暗杠';\r\n      case GangType.JIA_GANG:\r\n        return '加杠';\r\n      default:\r\n        return '杠';\r\n    }\r\n  };\r\n\r\n  // 获取玩家名称\r\n  const getPlayerName = (playerId: number): string => {\r\n    const playerNames = ['我', '下家', '对家', '上家'];\r\n    return playerNames[playerId] || `玩家${playerId + 1}`;\r\n  };\r\n\r\n  // 获取操作描述\r\n  const getActionDescription = (meld: Meld): string => {\r\n    if (!meld.tiles.length) return '';\r\n    \r\n    const tileName = tileToString(meld.tiles[0]);\r\n    const kongType = getKongTypeName(meld.gang_type);\r\n    \r\n    if (meld.gang_type === GangType.MING_GANG && meld.source_player !== undefined) {\r\n      const sourceName = getPlayerName(meld.source_player);\r\n      return `${kongType}了${sourceName}的${tileName}`;\r\n    } else if (meld.gang_type === GangType.JIA_GANG) {\r\n      return `${kongType} ${tileName}`;\r\n    } else {\r\n      return `${kongType} ${tileName}`;\r\n    }\r\n  };\r\n\r\n  // 获取时间显示\r\n  const getTimeDisplay = (timestamp?: number): string => {\r\n    if (!timestamp) return '';\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString('zh-CN', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      second: '2-digit'\r\n    });\r\n  };\r\n\r\n  if (kongMelds.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      className={`kong-action-history bg-white rounded-lg shadow-md p-3 ${className}`}\r\n      initial={{ opacity: 0, y: 10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.3 }}\r\n    >\r\n      <h4 className=\"text-sm font-semibold text-gray-700 mb-2 flex items-center\">\r\n        <span className=\"w-2 h-2 bg-orange-500 rounded-full mr-2\"></span>\r\n        杠牌记录\r\n      </h4>\r\n      \r\n      <div className=\"space-y-2\">\r\n        {kongMelds.map((meld, index) => (\r\n          <motion.div\r\n            key={meld.id || index}\r\n            className=\"flex items-center justify-between text-xs bg-gray-50 rounded p-2\"\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n          >\r\n            <div className=\"flex items-center space-x-2\">\r\n              {/* 杠牌类型图标 */}\r\n              <div className={`w-4 h-4 rounded-full flex items-center justify-center text-white text-xs font-bold ${\r\n                meld.gang_type === GangType.MING_GANG ? 'bg-red-500' :\r\n                meld.gang_type === GangType.AN_GANG ? 'bg-gray-500' :\r\n                'bg-yellow-500'\r\n              }`}>\r\n                {meld.gang_type === GangType.MING_GANG ? '明' :\r\n                 meld.gang_type === GangType.AN_GANG ? '暗' : '加'}\r\n              </div>\r\n              \r\n              {/* 操作描述 */}\r\n              <span className=\"text-gray-700 font-medium\">\r\n                {getActionDescription(meld)}\r\n              </span>\r\n            </div>\r\n            \r\n            {/* 时间戳 */}\r\n            {meld.timestamp && (\r\n              <span className=\"text-gray-400\">\r\n                {getTimeDisplay(meld.timestamp)}\r\n              </span>\r\n            )}\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default KongActionHistory; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,eAAe,CACtC,OAAeC,QAAQ,CAAEC,QAAQ,CAAEC,YAAY,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAQ1E,KAAM,CAAAC,iBAAmD,CAAGC,IAAA,EAItD,IAJuD,CAC3DC,KAAK,CACLC,aAAa,CACbC,SAAS,CAAG,EACd,CAAC,CAAAH,IAAA,CACC;AACA,KAAM,CAAAI,SAAS,CAAGH,KAAK,CAACI,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,IAAI,GAAKf,QAAQ,CAACgB,IAAI,CAAC,CAEnE;AACA,KAAM,CAAAC,eAAe,CAAIC,QAAmB,EAAa,CACvD,OAAQA,QAAQ,EACd,IAAK,CAAAjB,QAAQ,CAACkB,SAAS,CACrB,MAAO,IAAI,CACb,IAAK,CAAAlB,QAAQ,CAACmB,OAAO,CACnB,MAAO,IAAI,CACb,IAAK,CAAAnB,QAAQ,CAACoB,QAAQ,CACpB,MAAO,IAAI,CACb,QACE,MAAO,GAAG,CACd,CACF,CAAC,CAED;AACA,KAAM,CAAAC,aAAa,CAAIC,QAAgB,EAAa,CAClD,KAAM,CAAAC,WAAW,CAAG,CAAC,GAAG,CAAE,IAAI,CAAE,IAAI,CAAE,IAAI,CAAC,CAC3C,MAAO,CAAAA,WAAW,CAACD,QAAQ,CAAC,iBAAAE,MAAA,CAASF,QAAQ,CAAG,CAAC,CAAE,CACrD,CAAC,CAED;AACA,KAAM,CAAAG,oBAAoB,CAAIZ,IAAU,EAAa,CACnD,GAAI,CAACA,IAAI,CAACa,KAAK,CAACC,MAAM,CAAE,MAAO,EAAE,CAEjC,KAAM,CAAAC,QAAQ,CAAG3B,YAAY,CAACY,IAAI,CAACa,KAAK,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAAAG,QAAQ,CAAGb,eAAe,CAACH,IAAI,CAACiB,SAAS,CAAC,CAEhD,GAAIjB,IAAI,CAACiB,SAAS,GAAK9B,QAAQ,CAACkB,SAAS,EAAIL,IAAI,CAACkB,aAAa,GAAKC,SAAS,CAAE,CAC7E,KAAM,CAAAC,UAAU,CAAGZ,aAAa,CAACR,IAAI,CAACkB,aAAa,CAAC,CACpD,SAAAP,MAAA,CAAUK,QAAQ,WAAAL,MAAA,CAAIS,UAAU,WAAAT,MAAA,CAAII,QAAQ,EAC9C,CAAC,IAAM,IAAIf,IAAI,CAACiB,SAAS,GAAK9B,QAAQ,CAACoB,QAAQ,CAAE,CAC/C,SAAAI,MAAA,CAAUK,QAAQ,MAAAL,MAAA,CAAII,QAAQ,EAChC,CAAC,IAAM,CACL,SAAAJ,MAAA,CAAUK,QAAQ,MAAAL,MAAA,CAAII,QAAQ,EAChC,CACF,CAAC,CAED;AACA,KAAM,CAAAM,cAAc,CAAIC,SAAkB,EAAa,CACrD,GAAI,CAACA,SAAS,CAAE,MAAO,EAAE,CACzB,KAAM,CAAAC,IAAI,CAAG,GAAI,CAAAC,IAAI,CAACF,SAAS,CAAC,CAChC,MAAO,CAAAC,IAAI,CAACE,kBAAkB,CAAC,OAAO,CAAE,CACtCC,IAAI,CAAE,SAAS,CACfC,MAAM,CAAE,SAAS,CACjBC,MAAM,CAAE,SACV,CAAC,CAAC,CACJ,CAAC,CAED,GAAI9B,SAAS,CAACgB,MAAM,GAAK,CAAC,CAAE,CAC1B,MAAO,KAAI,CACb,CAEA,mBACEtB,KAAA,CAACP,MAAM,CAAC4C,GAAG,EACThC,SAAS,0DAAAc,MAAA,CAA2Dd,SAAS,CAAG,CAChFiC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,EAAG,CAAE,CAC/BC,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAAAC,QAAA,eAE9B5C,KAAA,OAAIK,SAAS,CAAC,4DAA4D,CAAAuC,QAAA,eACxE9C,IAAA,SAAMO,SAAS,CAAC,yCAAyC,CAAO,CAAC,2BAEnE,EAAI,CAAC,cAELP,IAAA,QAAKO,SAAS,CAAC,WAAW,CAAAuC,QAAA,CACvBtC,SAAS,CAACuC,GAAG,CAAC,CAACrC,IAAI,CAAEsC,KAAK,gBACzB9C,KAAA,CAACP,MAAM,CAAC4C,GAAG,EAEThC,SAAS,CAAC,kEAAkE,CAC5EiC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEQ,CAAC,CAAE,CAAC,EAAG,CAAE,CAChCN,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEQ,CAAC,CAAE,CAAE,CAAE,CAC9BL,UAAU,CAAE,CAAEM,KAAK,CAAEF,KAAK,CAAG,GAAI,CAAE,CAAAF,QAAA,eAEnC5C,KAAA,QAAKK,SAAS,CAAC,6BAA6B,CAAAuC,QAAA,eAE1C9C,IAAA,QAAKO,SAAS,uFAAAc,MAAA,CACZX,IAAI,CAACiB,SAAS,GAAK9B,QAAQ,CAACkB,SAAS,CAAG,YAAY,CACpDL,IAAI,CAACiB,SAAS,GAAK9B,QAAQ,CAACmB,OAAO,CAAG,aAAa,CACnD,eAAe,CACd,CAAA8B,QAAA,CACApC,IAAI,CAACiB,SAAS,GAAK9B,QAAQ,CAACkB,SAAS,CAAG,GAAG,CAC3CL,IAAI,CAACiB,SAAS,GAAK9B,QAAQ,CAACmB,OAAO,CAAG,GAAG,CAAG,GAAG,CAC7C,CAAC,cAGNhB,IAAA,SAAMO,SAAS,CAAC,2BAA2B,CAAAuC,QAAA,CACxCxB,oBAAoB,CAACZ,IAAI,CAAC,CACvB,CAAC,EACJ,CAAC,CAGLA,IAAI,CAACsB,SAAS,eACbhC,IAAA,SAAMO,SAAS,CAAC,eAAe,CAAAuC,QAAA,CAC5Bf,cAAc,CAACrB,IAAI,CAACsB,SAAS,CAAC,CAC3B,CACP,GA5BItB,IAAI,CAACyC,EAAE,EAAIH,KA6BN,CACb,CAAC,CACC,CAAC,EACI,CAAC,CAEjB,CAAC,CAED,cAAe,CAAA7C,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}