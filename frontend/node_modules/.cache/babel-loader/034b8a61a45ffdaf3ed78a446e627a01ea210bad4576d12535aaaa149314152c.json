{"ast":null,"code":"import React from'react';import{motion}from'framer-motion';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SourceIndicator=_ref=>{let{sourcePlayer,currentPlayer,position,showPlayerName=true,className=''}=_ref;// 玩家位置映射\nconst playerPositions=['下家','右家','上家','左家'];const playerNames=['我','下家','对家','上家'];// 根据来源玩家和当前玩家计算相对方向\nconst getDirection=()=>{const diff=(sourcePlayer-currentPlayer+4)%4;const directions=['self','right','opposite','left'];return directions[diff];};// 获取箭头方向的CSS类\nconst getArrowDirection=()=>{const direction=getDirection();const arrowMap={'self':'rotate-0',// 指向自己（不应该出现）\n'right':'rotate-90',// 右箭头\n'opposite':'rotate-180',// 上箭头  \n'left':'rotate-270'// 左箭头\n};return arrowMap[direction]||'rotate-0';};// 获取来源玩家的显示名称\nconst getSourcePlayerName=()=>{if(sourcePlayer===currentPlayer)return'自己';return playerNames[sourcePlayer]||\"\\u73A9\\u5BB6\".concat(sourcePlayer+1);};// 获取提示文本\nconst getTooltipText=()=>{const sourceName=getSourcePlayerName();return\"\\u6760\\u4E86 \".concat(sourceName,\" \\u7684\\u5F03\\u724C\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"source-indicator relative \".concat(className),children:[/*#__PURE__*/_jsx(motion.div,{className:\"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center shadow-lg z-30\",initial:{scale:0},animate:{scale:1},transition:{delay:0.2,type:\"spring\",stiffness:200},title:getTooltipText(),children:/*#__PURE__*/_jsx(\"div\",{className:\"w-0 h-0 border-l-[3px] border-r-[3px] border-b-[4px] border-l-transparent border-r-transparent border-b-white transform \".concat(getArrowDirection())})}),showPlayerName&&/*#__PURE__*/_jsxs(motion.div,{className:\"absolute -top-8 -left-4 bg-red-600 text-white text-xs px-2 py-1 rounded shadow-lg z-20 whitespace-nowrap\",initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:0.4},children:[getSourcePlayerName(),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-red-600\"})]}),/*#__PURE__*/_jsx(motion.div,{className:\"absolute top-0 left-0 w-1 h-1 bg-red-400 rounded-full\",animate:{scale:[1,2,1],opacity:[0.8,0.4,0.8]},transition:{duration:2,repeat:Infinity,ease:\"easeInOut\"}})]});};export default SourceIndicator;","map":{"version":3,"names":["React","motion","jsx","_jsx","jsxs","_jsxs","SourceIndicator","_ref","sourcePlayer","currentPlayer","position","showPlayerName","className","playerPositions","playerNames","getDirection","diff","directions","getArrowDirection","direction","arrowMap","getSourcePlayerName","concat","getTooltipText","sourceName","children","div","initial","scale","animate","transition","delay","type","stiffness","title","opacity","y","duration","repeat","Infinity","ease"],"sources":["D:/codes/PocketFlow-Tutorial-Codebase-Knowledge/paul/mj/frontend/src/components/SourceIndicator.tsx"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface SourceIndicatorProps {\r\n  sourcePlayer: number;\r\n  currentPlayer: number;\r\n  position: 'bottom' | 'right' | 'top' | 'left';\r\n  showPlayerName?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst SourceIndicator: React.FC<SourceIndicatorProps> = ({ \r\n  sourcePlayer, \r\n  currentPlayer, \r\n  position,\r\n  showPlayerName = true,\r\n  className = ''\r\n}) => {\r\n  // 玩家位置映射\r\n  const playerPositions = ['下家', '右家', '上家', '左家'];\r\n  const playerNames = ['我', '下家', '对家', '上家'];\r\n  \r\n  // 根据来源玩家和当前玩家计算相对方向\r\n  const getDirection = (): 'self' | 'right' | 'opposite' | 'left' => {\r\n    const diff = (sourcePlayer - currentPlayer + 4) % 4;\r\n    const directions = ['self', 'right', 'opposite', 'left'] as const;\r\n    return directions[diff];\r\n  };\r\n\r\n  // 获取箭头方向的CSS类\r\n  const getArrowDirection = (): string => {\r\n    const direction = getDirection();\r\n    const arrowMap = {\r\n      'self': 'rotate-0',      // 指向自己（不应该出现）\r\n      'right': 'rotate-90',    // 右箭头\r\n      'opposite': 'rotate-180', // 上箭头  \r\n      'left': 'rotate-270'     // 左箭头\r\n    };\r\n    return arrowMap[direction] || 'rotate-0';\r\n  };\r\n\r\n  // 获取来源玩家的显示名称\r\n  const getSourcePlayerName = (): string => {\r\n    if (sourcePlayer === currentPlayer) return '自己';\r\n    return playerNames[sourcePlayer] || `玩家${sourcePlayer + 1}`;\r\n  };\r\n\r\n  // 获取提示文本\r\n  const getTooltipText = (): string => {\r\n    const sourceName = getSourcePlayerName();\r\n    return `杠了 ${sourceName} 的弃牌`;\r\n  };\r\n\r\n  return (\r\n    <div className={`source-indicator relative ${className}`}>\r\n      {/* 主要箭头指示器 */}\r\n      <motion.div\r\n        className=\"absolute -top-2 -left-2 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center shadow-lg z-30\"\r\n        initial={{ scale: 0 }}\r\n        animate={{ scale: 1 }}\r\n        transition={{ delay: 0.2, type: \"spring\", stiffness: 200 }}\r\n        title={getTooltipText()}\r\n      >\r\n        <div className={`w-0 h-0 border-l-[3px] border-r-[3px] border-b-[4px] border-l-transparent border-r-transparent border-b-white transform ${getArrowDirection()}`} />\r\n      </motion.div>\r\n\r\n      {/* 玩家名称标签 */}\r\n      {showPlayerName && (\r\n        <motion.div\r\n          className=\"absolute -top-8 -left-4 bg-red-600 text-white text-xs px-2 py-1 rounded shadow-lg z-20 whitespace-nowrap\"\r\n          initial={{ opacity: 0, y: 5 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: 0.4 }}\r\n        >\r\n          {getSourcePlayerName()}\r\n          {/* 小三角箭头 */}\r\n          <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-2 border-r-2 border-t-2 border-transparent border-t-red-600\" />\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* 连接线动画 */}\r\n      <motion.div\r\n        className=\"absolute top-0 left-0 w-1 h-1 bg-red-400 rounded-full\"\r\n        animate={{\r\n          scale: [1, 2, 1],\r\n          opacity: [0.8, 0.4, 0.8]\r\n        }}\r\n        transition={{\r\n          duration: 2,\r\n          repeat: Infinity,\r\n          ease: \"easeInOut\"\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SourceIndicator; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}