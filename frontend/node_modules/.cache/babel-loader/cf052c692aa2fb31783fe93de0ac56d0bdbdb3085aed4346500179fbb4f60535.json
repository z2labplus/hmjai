{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst defaultSettings = {\n  cardBackStyle: 'pure',\n  enableAnimations: true,\n  autoSave: true\n};\nconst SETTINGS_STORAGE_KEY = 'mahjong_settings';\nexport const useSettings = () => {\n  _s();\n  const [settings, setSettings] = useState(defaultSettings);\n\n  // 初始化时从localStorage加载设置\n  useEffect(() => {\n    try {\n      const savedSettings = localStorage.getItem(SETTINGS_STORAGE_KEY);\n      if (savedSettings) {\n        const parsed = JSON.parse(savedSettings);\n        setSettings({\n          ...defaultSettings,\n          ...parsed\n        });\n      }\n    } catch (error) {\n      console.warn('加载设置失败，使用默认设置:', error);\n    }\n  }, []);\n\n  // 保存设置到localStorage\n  const saveSettings = newSettings => {\n    try {\n      const updatedSettings = {\n        ...settings,\n        ...newSettings\n      };\n      setSettings(updatedSettings);\n      localStorage.setItem(SETTINGS_STORAGE_KEY, JSON.stringify(updatedSettings));\n    } catch (error) {\n      console.error('保存设置失败:', error);\n    }\n  };\n\n  // 单独的设置更新函数\n  const updateCardBackStyle = style => {\n    saveSettings({\n      cardBackStyle: style\n    });\n  };\n  const updateAnimations = enabled => {\n    saveSettings({\n      enableAnimations: enabled\n    });\n  };\n  const updateAutoSave = enabled => {\n    saveSettings({\n      autoSave: enabled\n    });\n  };\n\n  // 重置设置\n  const resetSettings = () => {\n    setSettings(defaultSettings);\n    localStorage.removeItem(SETTINGS_STORAGE_KEY);\n  };\n  return {\n    settings,\n    updateCardBackStyle,\n    updateAnimations,\n    updateAutoSave,\n    resetSettings,\n    saveSettings\n  };\n};\n_s(useSettings, \"ZGre7If7w4HenpmZpG3z+HIEEH4=\");","map":{"version":3,"names":["useState","useEffect","defaultSettings","cardBackStyle","enableAnimations","autoSave","SETTINGS_STORAGE_KEY","useSettings","_s","settings","setSettings","savedSettings","localStorage","getItem","parsed","JSON","parse","error","console","warn","saveSettings","newSettings","updatedSettings","setItem","stringify","updateCardBackStyle","style","updateAnimations","enabled","updateAutoSave","resetSettings","removeItem"],"sources":["D:/codes/PocketFlow-Tutorial-Codebase-Knowledge/paul/mj/frontend/src/hooks/useSettings.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { CardBackStyle } from '../components/MahjongTile';\n\ninterface Settings {\n  cardBackStyle: CardBackStyle;\n  enableAnimations: boolean;\n  autoSave: boolean;\n}\n\nconst defaultSettings: Settings = {\n  cardBackStyle: 'pure',\n  enableAnimations: true,\n  autoSave: true,\n};\n\nconst SETTINGS_STORAGE_KEY = 'mahjong_settings';\n\nexport const useSettings = () => {\n  const [settings, setSettings] = useState<Settings>(defaultSettings);\n\n  // 初始化时从localStorage加载设置\n  useEffect(() => {\n    try {\n      const savedSettings = localStorage.getItem(SETTINGS_STORAGE_KEY);\n      if (savedSettings) {\n        const parsed = JSON.parse(savedSettings);\n        setSettings({ ...defaultSettings, ...parsed });\n      }\n    } catch (error) {\n      console.warn('加载设置失败，使用默认设置:', error);\n    }\n  }, []);\n\n  // 保存设置到localStorage\n  const saveSettings = (newSettings: Partial<Settings>) => {\n    try {\n      const updatedSettings = { ...settings, ...newSettings };\n      setSettings(updatedSettings);\n      localStorage.setItem(SETTINGS_STORAGE_KEY, JSON.stringify(updatedSettings));\n    } catch (error) {\n      console.error('保存设置失败:', error);\n    }\n  };\n\n  // 单独的设置更新函数\n  const updateCardBackStyle = (style: CardBackStyle) => {\n    saveSettings({ cardBackStyle: style });\n  };\n\n  const updateAnimations = (enabled: boolean) => {\n    saveSettings({ enableAnimations: enabled });\n  };\n\n  const updateAutoSave = (enabled: boolean) => {\n    saveSettings({ autoSave: enabled });\n  };\n\n  // 重置设置\n  const resetSettings = () => {\n    setSettings(defaultSettings);\n    localStorage.removeItem(SETTINGS_STORAGE_KEY);\n  };\n\n  return {\n    settings,\n    updateCardBackStyle,\n    updateAnimations,\n    updateAutoSave,\n    resetSettings,\n    saveSettings,\n  };\n}; "],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAS3C,MAAMC,eAAyB,GAAG;EAChCC,aAAa,EAAE,MAAM;EACrBC,gBAAgB,EAAE,IAAI;EACtBC,QAAQ,EAAE;AACZ,CAAC;AAED,MAAMC,oBAAoB,GAAG,kBAAkB;AAE/C,OAAO,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAWE,eAAe,CAAC;;EAEnE;EACAD,SAAS,CAAC,MAAM;IACd,IAAI;MACF,MAAMU,aAAa,GAAGC,YAAY,CAACC,OAAO,CAACP,oBAAoB,CAAC;MAChE,IAAIK,aAAa,EAAE;QACjB,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,aAAa,CAAC;QACxCD,WAAW,CAAC;UAAE,GAAGR,eAAe;UAAE,GAAGY;QAAO,CAAC,CAAC;MAChD;IACF,CAAC,CAAC,OAAOG,KAAK,EAAE;MACdC,OAAO,CAACC,IAAI,CAAC,gBAAgB,EAAEF,KAAK,CAAC;IACvC;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMG,YAAY,GAAIC,WAA8B,IAAK;IACvD,IAAI;MACF,MAAMC,eAAe,GAAG;QAAE,GAAGb,QAAQ;QAAE,GAAGY;MAAY,CAAC;MACvDX,WAAW,CAACY,eAAe,CAAC;MAC5BV,YAAY,CAACW,OAAO,CAACjB,oBAAoB,EAAES,IAAI,CAACS,SAAS,CAACF,eAAe,CAAC,CAAC;IAC7E,CAAC,CAAC,OAAOL,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;IACjC;EACF,CAAC;;EAED;EACA,MAAMQ,mBAAmB,GAAIC,KAAoB,IAAK;IACpDN,YAAY,CAAC;MAAEjB,aAAa,EAAEuB;IAAM,CAAC,CAAC;EACxC,CAAC;EAED,MAAMC,gBAAgB,GAAIC,OAAgB,IAAK;IAC7CR,YAAY,CAAC;MAAEhB,gBAAgB,EAAEwB;IAAQ,CAAC,CAAC;EAC7C,CAAC;EAED,MAAMC,cAAc,GAAID,OAAgB,IAAK;IAC3CR,YAAY,CAAC;MAAEf,QAAQ,EAAEuB;IAAQ,CAAC,CAAC;EACrC,CAAC;;EAED;EACA,MAAME,aAAa,GAAGA,CAAA,KAAM;IAC1BpB,WAAW,CAACR,eAAe,CAAC;IAC5BU,YAAY,CAACmB,UAAU,CAACzB,oBAAoB,CAAC;EAC/C,CAAC;EAED,OAAO;IACLG,QAAQ;IACRgB,mBAAmB;IACnBE,gBAAgB;IAChBE,cAAc;IACdC,aAAa;IACbV;EACF,CAAC;AACH,CAAC;AAACZ,EAAA,CAtDWD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}