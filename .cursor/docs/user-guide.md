# 欢乐麻将辅助工具 - 使用说明

## 1. 快速开始

### 1.1 系统要求
- **操作系统**: Windows 10+, macOS 10.15+, Linux Ubuntu 18.04+
- **浏览器**: Chrome 88+, Firefox 85+, Safari 14+, Edge 88+
- **Node.js**: 18.0+ (用于开发)
- **Python**: 3.11+ (用于后端服务)
- **Redis**: 6.0+ (用于数据缓存)

### 1.2 快速体验
如果只想快速体验功能，可以访问在线版本：
```
https://mahjong-assistant.demo.com
```

## 2. 本地安装

### 2.1 获取源码
```bash
# 克隆项目
git clone https://github.com/your-org/mahjong-assistant.git
cd mahjong-assistant
```

### 2.2 安装依赖

#### 前端依赖
```bash
cd frontend
npm install
```

#### 后端依赖
```bash
cd backend
pip install -r requirements.txt
```

#### Redis安装
**Windows:**
1. 下载 Redis for Windows
2. 解压到任意目录
3. 运行 `redis-server.exe`

**macOS:**
```bash
brew install redis
brew services start redis
```

**Linux:**
```bash
sudo apt update
sudo apt install redis-server
sudo systemctl start redis
```

### 2.3 启动服务

#### 启动后端服务
```bash
cd backend
python start_server.py
```
服务将在 `http://localhost:8000` 启动

#### 启动前端服务
```bash
cd frontend
npm start
```
应用将在 `http://localhost:3000` 启动

## 3. 界面介绍

### 3.1 主界面布局

```
┌─────────────────────────────────────────────────────────┐
│                    头部导航栏                           │
├─────────────────────────────────┬───────────────────────┤
│                                 │                       │
│            游戏面板             │      分析面板         │
│                                 │                       │
│  ┌─────────────────────────┐   │  ┌─────────────────┐  │
│  │      麻将桌弃牌区       │   │  │   智能分析结果  │  │
│  └─────────────────────────┘   │  └─────────────────┘  │
│                                 │                       │
│  ┌─────────────────────────┐   │  ┌─────────────────┐  │
│  │        我的手牌         │   │  │   概率统计      │  │
│  └─────────────────────────┘   │  └─────────────────┘  │
│                                 │                       │
│  ┌─────────────────────────┐   │  ┌─────────────────┐  │
│  │      麻将牌选择器       │   │  │   操作建议      │  │
│  └─────────────────────────┘   │  └─────────────────┘  │
│                                 │                       │
└─────────────────────────────────┴───────────────────────┘
│                    底部信息栏                           │
└─────────────────────────────────────────────────────────┘
```

### 3.2 功能区域说明

#### 麻将桌弃牌区
- 四家围坐的麻将桌布局
- **对家（上方）**: 红色标识，显示对家弃牌
- **上家（左侧）**: 绿色标识，显示上家弃牌  
- **下家（右侧）**: 黄色标识，显示下家弃牌
- **我（下方）**: 蓝色标识，显示自己的弃牌
- 中央显示麻将图标，会缓慢旋转

#### 我的手牌区
- 显示当前手牌
- 点击牌可以选中/取消选中
- 支持批量选择和弃牌
- 实时显示手牌数量

#### 麻将牌选择器
- 按花色分类显示所有麻将牌
- **万子**: 1万-9万
- **条子**: 1条-9条  
- **筒子**: 1筒-9筒
- **字牌**: 东南西北中发白

#### 分析面板
- **智能建议**: 推荐的弃牌和理由
- **概率分析**: 胡牌概率和听牌信息
- **剩余牌统计**: 各种牌的剩余数量

## 4. 基本操作

### 4.1 输入手牌

1. **选择输入模式**
   - 点击"添加到手牌"按钮
   - 在麻将牌选择器中点击相应的牌

2. **快速输入**
   - 依次点击手牌中的每张牌
   - 手牌区会实时显示添加的牌

3. **删除手牌**
   - 在手牌区点击选中要删除的牌
   - 点击"弃掉选中的牌"按钮

### 4.2 记录弃牌

1. **切换弃牌模式**
   - 点击"直接弃牌"按钮
   - 选择弃牌的玩家（我/下家/对家/上家）

2. **添加弃牌**
   - 在麻将牌选择器中点击相应的牌
   - 弃牌会自动添加到对应玩家的弃牌区

3. **批量弃牌**
   - 在手牌区选中多张牌
   - 点击"弃掉选中的牌"按钮

### 4.3 获取分析建议

分析功能会在以下情况自动触发：
- 手牌发生变化时
- 弃牌信息更新时
- 点击"开始分析"按钮时

分析结果包括：
- **推荐弃牌**: 当前情况下最优的弃牌选择
- **弃牌分数**: 每张牌的价值评分
- **听牌检测**: 是否已经听牌
- **胡牌概率**: 当前状态下的胜率
- **剩余牌统计**: 各种牌的剩余数量

## 5. 高级功能

### 5.1 牌局复盘

1. **保存牌局**
   - 系统会自动保存当前牌局状态
   - 可以手动导出牌局数据

2. **加载历史牌局**
   - 从本地存储加载之前的牌局
   - 支持导入外部牌局数据

3. **牌局分析**
   - 查看整个牌局的决策过程
   - 分析关键节点的选择

### 5.2 自定义设置

1. **显示设置**
   - 调整麻将牌尺寸
   - 选择配色主题
   - 设置动画效果

2. **算法设置**
   - 选择概率计算方法
   - 调整分析深度
   - 设置风险偏好

3. **快捷键设置**
   - 自定义操作快捷键
   - 启用/禁用特定功能

### 5.3 数据导入导出

1. **导出格式**
   - JSON格式（完整数据）
   - CSV格式（统计数据）
   - 图片格式（当前状态截图）

2. **导入支持**
   - 从其他麻将软件导入
   - 批量导入牌局数据
   - 支持多种格式转换

## 6. 使用技巧

### 6.1 提高分析准确性

1. **完整记录信息**
   - 尽量记录所有已知的弃牌
   - 准确输入自己的手牌
   - 及时更新游戏状态

2. **理解分析结果**
   - 概率只是参考，需结合实际情况
   - 关注多个建议选项，不只看第一个
   - 考虑对手的可能策略

3. **合理使用建议**
   - 分析结果是基于数学计算
   - 实际游戏中要考虑心理因素
   - 根据对手特点调整策略

### 6.2 快捷操作

1. **键盘快捷键**
   - `Space`: 开始分析
   - `Delete`: 清空选中
   - `Ctrl+Z`: 撤销操作
   - `F5`: 刷新状态

2. **鼠标操作**
   - 双击牌面快速添加到手牌
   - 右键菜单提供更多选项
   - 拖拽操作调整牌的位置

### 6.3 性能优化

1. **大量数据处理**
   - 定期清理历史数据
   - 关闭不必要的动画效果
   - 使用简化显示模式

2. **网络优化**
   - 启用本地缓存
   - 使用离线模式
   - 减少实时同步频率

## 7. 常见问题

### 7.1 安装问题

**Q: 无法启动后端服务**
A: 检查以下项目：
- Python版本是否为3.11+
- 是否安装了所有依赖包
- Redis服务是否正常运行
- 端口8000是否被占用

**Q: 前端页面无法加载**
A: 可能的解决方案：
- 检查Node.js版本
- 清除npm缓存：`npm cache clean --force`
- 删除node_modules重新安装
- 检查防火墙设置

### 7.2 使用问题

**Q: 分析结果不准确**
A: 可能原因：
- 输入的手牌信息不完整
- 弃牌记录有遗漏
- 算法参数设置不当
- 需要更多的牌局数据训练

**Q: 界面显示异常**
A: 尝试以下解决方法：
- 刷新浏览器页面
- 清除浏览器缓存
- 更新浏览器版本
- 检查屏幕分辨率设置

### 7.3 性能问题

**Q: 分析速度较慢**
A: 优化建议：
- 降低分析精度设置
- 关闭实时分析功能
- 升级硬件配置
- 使用本地部署版本

**Q: 内存占用过高**
A: 解决方案：
- 定期重启应用
- 清理历史数据
- 关闭其他不必要的程序
- 调整缓存大小设置

## 8. 最佳实践

### 8.1 学习建议

1. **循序渐进**
   - 先熟悉基本操作
   - 逐步使用高级功能
   - 多看分析结果的解释

2. **理论结合实践**
   - 将分析结果与实际对局对比
   - 总结成功和失败的经验
   - 不断调整使用策略

### 8.2 注意事项

1. **合理依赖**
   - 工具只是辅助，不能完全依赖
   - 保持独立思考能力
   - 注重培养麻将基础技能

2. **责任使用**
   - 仅用于学习和娱乐
   - 不得用于赌博等非法活动
   - 尊重对手和游戏规则

## 9. 更新和维护

### 9.1 版本更新

- 定期检查新版本发布
- 阅读更新日志了解新功能
- 备份重要数据后再更新
- 反馈使用中遇到的问题

### 9.2 数据备份

- 定期导出重要的牌局数据
- 保存个人设置配置
- 建立多个备份副本
- 验证备份数据的完整性

### 9.3 社区支持

- 访问官方论坛交流心得
- 参与开源项目贡献代码
- 报告bug和提出改进建议
- 帮助其他用户解决问题

## 10. 联系我们

如果您在使用过程中遇到任何问题，或者有任何建议，欢迎通过以下方式联系我们：

- **GitHub**: https://github.com/your-org/mahjong-assistant
- **邮箱**: support@mahjong-assistant.com
- **QQ群**: 123456789
- **微信群**: 扫描二维码加入

感谢您使用欢乐麻将辅助工具！ 